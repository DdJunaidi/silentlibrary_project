{% extends "base.html" %}
{% block title %}Admin — Users{% endblock %}
{% block content %}
<main class="container py-5">
  <h1 class="mb-3">Users</h1>

  <form class="row g-2 mb-3" method="get">
    <div class="col-md-6">
      <input type="search" name="q" value="{{ q }}" class="form-control" placeholder="Search username, name, email…">
    </div>
    <div class="col-md-2">
      <button class="btn btn-outline-secondary w-100">Search</button>
    </div>
  </form>

  <div class="table-responsive">
    <table class="table align-middle">
      <thead>
        <tr>
          <th>Username</th><th>Name</th><th>Email</th><th>Active</th><th>Staff</th><th></th>
        </tr>
      </thead>
      <tbody>
        {% for u in users %}
        <tr>
          <td>{{ u.username }}</td>
          <td>{{ u.first_name }} {{ u.last_name }}</td>
          <td>{{ u.email }}</td>
          <td>{{ u.is_active|yesno:"Yes,No" }}</td>
          <td>{{ u.is_staff|yesno:"Yes,No" }}</td>
          <td class="text-end">
            <a class="btn btn-sm btn-outline-primary" href="{% url 'admin_user_update' u.pk %}">Edit</a>
          </td>
        </tr>
        {% empty %}
        <tr><td colspan="6" class="text-muted">No users found.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  {% if users.has_other_pages %}
  <nav aria-label="Users pagination">
    <ul class="pagination">
      {% if users.has_previous %}
      <li class="page-item"><a class="page-link" href="?q={{ q }}&page={{ users.previous_page_number }}">Previous</a></li>
      {% else %}
      <li class="page-item disabled"><span class="page-link">Previous</span></li>
      {% endif %}

      <li class="page-item disabled"><span class="page-link">Page {{ users.number }} of {{ users.paginator.num_pages }}</span></li>

      {% if users.has_next %}
      <li class="page-item"><a class="page-link" href="?q={{ q }}&page={{ users.next_page_number }}">Next</a></li>
      {% else %}
      <li class="page-item disabled"><span class="page-link">Next</span></li>
      {% endif %}
    </ul>
  </nav>
  {% endif %}
</main>
{% endblock %}
